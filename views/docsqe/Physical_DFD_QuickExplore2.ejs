<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickExplore - Physical Data Flow Diagrams</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-gray: #f8f9fa;
            --dark-gray: #343a40;
            --box-bg: #ffffff;
            --border-color: #dee2e6;
            
            /* New color variables */
            --system-color: #18477e;
            --user-color: #79b3f9;
            --db-color: #3f88f9;
            --entity-color: #79b3f9;
            --process-color: #18477e;
            --storage-color: #a6c9ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-gray);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }
        
        h2 {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }
        
        h3 {
            font-size: 1.4rem;
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem;
        }
        
        .dfd-card {
            background-color: var(--box-bg);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .dfd-diagram {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            white-space: pre;
            font-family: 'Courier New', Courier, monospace;
        }
        
        ul {
            padding-left: 2rem;
            margin: 1rem 0;
        }
        
        .entity-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .entity-item {
            background-color: rgba(74, 144, 226, 0.1);
            border-left: 3px solid var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }
        
        .data-store {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .data-store h4 {
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }
        
        .data-store ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .data-store li {
            padding: 0.3rem 0;
            border-bottom: 1px dashed #eee;
        }
        
        .data-store li:last-child {
            border-bottom: none;
        }
        
        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            color: #6c757d;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .dfd-diagram {
                font-size: 0.8rem;
            }
        }
        
        /* Interactive elements */
        .collapsible {
            background-color: rgba(74, 144, 226, 0.1);
            color: var(--secondary-color);
            cursor: pointer;
            padding: 1rem;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 6px;
            margin-bottom: 0.5rem;
            transition: background-color 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .active, .collapsible:hover {
            background-color: rgba(74, 144, 226, 0.2);
        }
        
        .collapsible:after {
            content: '\002B';
            color: var(--primary-color);
            font-weight: bold;
            margin-left: 5px;
        }
        
        .active:after {
            content: "\2212";
        }
        
        .content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: white;
            border-radius: 0 0 6px 6px;
        }
        
        /* New diagram styles */
        .visual-dfd {
            background-color: white;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            min-height: 500px;
            border-radius: 8px;
        }
        
        .dfd-box {
            position: absolute;
            width: 160px;
            height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            font-weight: bold;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 10px;
            font-size: 14px;
        }
        
        .dfd-entity {
            background-color: var(--entity-color);
        }
        
        .dfd-process {
            background-color: var(--process-color);
            border-radius: 50%;
        }
        
        .dfd-storage {
            background-color: var(--storage-color);
            color: var(--dark-gray);
            border-radius: 8px;
            border-top: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
        }
        
        .dfd-flow {
            position: absolute;
            color: #666;
            font-size: 12px;
            text-align: center;
            font-weight: normal;
        }
        
        .arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
        }
        
        .dfd-title {
            font-size: 1.8rem;
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 10px;
            padding: 5px 0;
            background-color: var(--light-gray);
            border-radius: 8px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .visual-dfd {
                padding: 10px;
                min-height: 300px;
            }
            
            .dfd-box {
                width: 100px;
                height: 60px;
                font-size: 12px;
            }
            
            .dfd-flow {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Physical Data Flow Diagrams for QuickExplore</h1>
            <p>Based on current project models and application structure</p>
        </header>
        
        <div class="dfd-card">
            <h2>DFD Level 0 (Context Diagram)</h2>
            <div class="visual-dfd">
                <!-- <div class="dfd-title">Context Diagram (Level 0)</div> -->
                
                <!-- Entities -->
                <div class="dfd-box dfd-entity" style="top: 70px; left: 80px;">External Entities</div>
                <div class="dfd-box dfd-entity" style="top: 70px; right: 80px;">External Systems</div>
                
                <!-- Process -->
                <div class="dfd-box dfd-process" style="top: 32px; left: 50%; transform: translateX(-50%); width: 180px; height: 180px;">QuickExplore System</div>
                
                <!-- Flows -->
                <div class="dfd-flow" style="top: 60px; left: 28%;">Data Request</div>
                <div class="dfd-flow" style="top: 60px; right: 30%;">API Calls</div>
                <div class="dfd-flow" style="top: 160px; left: 28%;">Data Response</div>
                <div class="dfd-flow" style="top: 160px; right: 30%;">Data Storage</div>
                
                <!-- Arrows -->
                <svg width="100%" height="100%" style="position: absolute; top: 0; left: 0;">
                    <!-- Left entity to process -->
                    <line x1="240" y1="95" x2="460" y2="95" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead)" />
                    <!-- Process to right entity -->
                    <line x1="650" y1="95" x2="880" y2="95" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead)" />
                    <!-- Right entity to process -->
                    <line x1="880" y1="140" x2="680" y2="140" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead)" />
                    <!-- Process to left entity -->
                    <line x1="470" y1="140" x2="260" y2="140" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead)" />
                    
                    <!-- Arrow definition -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <h3>External Entities</h3>
            <div class="entity-list">
                <div class="entity-item">Users (Tourists)</div>
                <div class="entity-item">Vehicle Owners</div>
                <div class="entity-item">Accommodation Owners</div>
                <div class="entity-item">Drivers</div>
                <div class="entity-item">Administrator</div>
            </div>
            
            <h3>External Systems</h3>
            <div class="entity-list">
                <div class="entity-item">MongoDB Database</div>
                <div class="entity-item">Cloudinary (Image Storage)</div>
                <div class="entity-item">Session Store</div>
            </div>
        </div>
        
        <div class="dfd-card">
            <h2>DFD Level 1 (Main Processes)</h2>
            <!-- <div class="dfd-title">DFD Level 1 (Main Processes)</div> -->
            <div class="visual-dfd" style="min-height: 600px;">
                
                
                <!-- Entities & Storage-->
                <div class="dfd-box dfd-entity" style="top: 50px; left: 50px;">User Management</div>
                <div class="dfd-box dfd-entity" style="top: 180px; left: 50px;">Tourist Place Management</div>
                <div class="dfd-box dfd-entity" style="top: 310px; left: 50px;">Accommodation Management</div>
                <div class="dfd-box dfd-entity" style="top: 440px; left: 50px;">Admin Portal</div>
                
                <div class="dfd-box dfd-storage" style="top: 50px; right: 50px;">Session Store</div>
                <div class="dfd-box dfd-storage" style="top: 180px; right: 50px;">Database (MongoDB)</div>
                <div class="dfd-box dfd-storage" style="top: 310px; right: 50px;">Image Storage</div>
                <div class="dfd-box dfd-storage" style="top: 440px; right: 50px;">Charges Histroy System</div>
                
                <!-- Processes -->
                <div class="dfd-box dfd-process" style="top: 50px; left: 50%; transform: translateX(-50%);">Authentication & Access</div>
                <div class="dfd-box dfd-process" style="top: 180px; left: 50%; transform: translateX(-50%);">Vehicle Management</div>
                <div class="dfd-box dfd-process" style="top: 310px; left: 50%; transform: translateX(-50%);">Booking Management</div>
                <div class="dfd-box dfd-process" style="top: 440px; left: 50%; transform: translateX(-50%);">Transaction Management</div>
                
                <!-- Flows are drawn by SVG -->
                <svg width="100%" height="100%" style="position: absolute; top: 0; left: 0;">
                    <!-- Level 1 connections - left to center -->
                    <line x1="210" y1="95" x2="470" y2="95" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="210" y1="225" x2="470" y2="225" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="210" y1="355" x2="470" y2="355" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="210" y1="485" x2="470" y2="485" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    
                    <!-- Center to right -->
                    <line x1="650" y1="95" x2="900" y2="95" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="650" y1="225" x2="900" y2="225" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="650" y1="355" x2="900" y2="355" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="650" y1="485" x2="900" y2="485" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    
                    <!-- Vertical connections -->
                    <line x1="130" y1="140" x2="130" y2="180" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="130" y1="270" x2="130" y2="310" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="130" y1="400" x2="130" y2="440" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    
                    <line x1="570" y1="140" x2="570" y2="180" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="570" y1="270" x2="570" y2="310" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="570" y1="400" x2="570" y2="440" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    
                    <line x1="1010" y1="140" x2="1010" y2="180" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="1010" y1="270" x2="1010" y2="310" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    <line x1="1010" y1="400" x2="1010" y2="440" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead1)" />
                    
                    <!-- Arrow definition -->
                    <defs>
                        <marker id="arrowhead1" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                        </marker>
                    </defs>
                </svg>
            </div>
        </div>
        
        <div class="dfd-card">
            <h2>DFD Level 2 (Detailed Process Breakdown)</h2>
            <div class="visual-dfd" style="min-height: 900px;">
                <!-- <div class="dfd-title">Integrated System Flow (Level 2)</div> -->
                
                <!-- Top row -->
                <div class="dfd-box dfd-entity" style="top: 60px; left: 100px;">User (Browser)</div>
                <div class="dfd-box dfd-process" style="top: 60px; left: 50%; transform: translateX(-50%);">User Registration & Authentication</div>
                <div class="dfd-box dfd-storage" style="top: 60px; right: 100px;">MongoDB (User Collection)</div>
                
                <!-- Second row -->
                <div class="dfd-box dfd-entity" style="top: 170px; left: 100px;">Vehicle Owner</div>
                <div class="dfd-box dfd-process" style="top: 170px; left: 50%; transform: translateX(-50%);">Vehicle Request Management</div>
                <div class="dfd-box dfd-storage" style="top: 170px; right: 100px;">MongoDB (vehicleRequests)</div>
                
                <!-- Third row -->
                <div class="dfd-box dfd-entity" style="top: 280px; left: 100px;">Accommodation Owner</div>
                <div class="dfd-box dfd-process" style="top: 280px; left: 50%; transform: translateX(-50%);">Rental Property Management</div>
                <div class="dfd-box dfd-storage" style="top: 280px; right: 100px;">MongoDB (rentalRequests)</div>
                
                <!-- Fourth row -->
                <div class="dfd-box dfd-entity" style="top: 390px; left: 100px;">Tourist Places</div>
                <div class="dfd-box dfd-process" style="top: 390px; left: 50%; transform: translateX(-50%);">Tourist Place Management</div>
                <div class="dfd-box dfd-storage" style="top: 390px; right: 100px;">MongoDB (ListingPs)</div>
                
                <!-- Fifth row -->
                <div class="dfd-box dfd-entity" style="top: 500px; left: 100px;">Admin</div>
                <div class="dfd-box dfd-process" style="top: 500px; left: 50%; transform: translateX(-50%);">Request Approval & Management</div>
                <div class="dfd-box dfd-storage" style="top: 500px; right: 100px;">Cloudinary (Image Store)</div>
                
                <!-- Sixth row -->
                <div class="dfd-box dfd-entity" style="top: 610px; left: 100px;">Users (Tourists)</div>
                <div class="dfd-box dfd-process" style="top: 610px; left: 50%; transform: translateX(-50%);">Search & Booking Process</div>
                <div class="dfd-box dfd-storage" style="top: 610px; right: 100px;">MongoDB (Bookings)</div>
                
                <!-- Seventh row -->
                <div class="dfd-box dfd-entity" style="top: 720px; left: 100px;">Transaction System</div>
                <div class="dfd-box dfd-process" style="top: 720px; left: 50%; transform: translateX(-50%);">Payment & Refund Process</div>
                <div class="dfd-box dfd-storage" style="top: 720px; right: 100px;">MongoDB (Transactions)</div>
                
                <!-- Draw all the connections with SVG -->
                <svg width="100%" height="100%" style="position: absolute; top: 0; left: 0;">
                    <!-- Horizontal connections -->
                    <!-- Row 1 -->
                    <line x1="260" y1="105" x2="460" y2="105" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="105" x2="860" y2="105" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Row 2 -->
                    <line x1="260" y1="215" x2="460" y2="215" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="215" x2="860" y2="215" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Row 3 -->
                    <line x1="260" y1="325" x2="460" y2="325" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="325" x2="860" y2="325" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Row 4 -->
                    <line x1="260" y1="435" x2="460" y2="435" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="435" x2="860" y2="435" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Row 5 -->
                    <line x1="260" y1="545" x2="460" y2="545" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="545" x2="860" y2="545" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Row 6 -->
                    <line x1="260" y1="655" x2="460" y2="655" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="655" x2="860" y2="655" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Row 7 -->
                    <line x1="260" y1="765" x2="460" y2="765" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="650" y1="765" x2="860" y2="765" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Vertical connections -->
                    <line x1="570" y1="150" x2="570" y2="170" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="570" y1="260" x2="570" y2="280" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="570" y1="370" x2="570" y2="390" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="570" y1="480" x2="570" y2="500" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="570" y1="590" x2="570" y2="610" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="570" y1="700" x2="570" y2="720" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Left entities vertical connections -->
                    <line x1="180" y1="150" x2="180" y2="170" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="180" y1="260" x2="180" y2="280" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="180" y1="370" x2="180" y2="390" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="180" y1="480" x2="180" y2="500" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="180" y1="590" x2="180" y2="610" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="180" y1="700" x2="180" y2="720" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Right databases vertical connections -->
                    <line x1="960" y1="150" x2="960" y2="170" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="960" y1="260" x2="960" y2="280" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="960" y1="370" x2="960" y2="390" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="960" y1="480" x2="960" y2="500" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="960" y1="590" x2="960" y2="610" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    <line x1="960" y1="700" x2="960" y2="720" style="stroke:#666; stroke-width:2" marker-end="url(#arrowhead2)" />
                    
                    <!-- Arrow definition -->
                    <defs>
                        <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <h3>Process Descriptions</h3>
            <ul>
                <li><strong>User Registration & Authentication</strong>: Handles user signup, login, and session management with bcrypt encryption</li>
                <li><strong>Vehicle Request Management</strong>: Process for vehicle owners to register their vehicles in the system</li>
                <li><strong>Rental Property Management</strong>: Process for rental owners to list their accommodations</li>
                <li><strong>Tourist Place Management</strong>: Management of tourist destinations in the system</li>
                <li><strong>Request Approval & Management</strong>: Admin verification and approval of vehicle and accommodation listings</li>
                <li><strong>Search & Booking Process</strong>: Complete flow from search to booking confirmation for users</li>
                <li><strong>Payment & Refund Process</strong>: Handling payments, cancellations and refunds</li>
            </ul>
            
            <h3>Data Flow Description</h3>
            <p>The data flows through the system in a structured manner:</p>
            <ol>
                <li>Users (tourists, vehicle owners, rental owners) register in the system</li>
                <li>Owners submit their listings (vehicles/properties) to the system</li>
                <li>Admin approves or rejects listings</li>
                <li>Approved listings are stored in MongoDB with images in Cloudinary</li>
                <li>Tourists search for places, vehicles, and accommodations</li>
                <li>Bookings are created and processed through the payment system</li>
                <li>Transactions are recorded and notifications are sent</li>
                <li>Cancellations trigger the refund process when applicable</li>
                <li>User history is maintained for all activities</li>
            </ol>
        </div>
        
        <div class="dfd-card">
            <h2>Physical Data Store Specifications</h2>
            
            <div class="data-store">
                <h4>User Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: Users</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Authentication: bcrypt for password hashing</li>
                    <li>Fields: username, email, password, phone, createdAt</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Place Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: ListingPs</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Media Storage: URLs to cloudinary images</li>
                    <li>Fields: title, images, location, pincode, description, type, bestTimeToVisit, entryFee, contact, website, nearbyAttractions, createdAt</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Vehicle Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: vehicleRequests</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Foreign Keys: currentDriver (reference to Driver)</li>
                    <li>Fields: ownerName, contact, email, vehicleType, brand, model, registrationNumber, location, pincode, images, rentalPricePerDay, availableFrom, availableTo, place, adminStatus, bookingStatus, createdAt</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Rental Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: rentalRequests</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Fields: ownerName, contact, email, propertyType, location, place, distFromPlace, pincode, price, images, description, adminStatus, bookingStatus, createdAt, password</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Driver Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: drivers</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Foreign Keys: currentVehicle (reference to vehicleRequest)</li>
                    <li>Fields: username, phone, email, place, password</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Booking Stores</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collections: 
                        <ul style="padding-left: 20px; margin: 5px 0;">
                            <li>Bookings (for vehicles)</li>
                            <li>RentalBookings (for accommodations)</li>
                        </ul>
                    </li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Foreign Keys:
                        <ul style="padding-left: 20px; margin: 5px 0;">
                            <li>userId (reference to User)</li>
                            <li>vehicleId (reference to VehicleRequest)</li>
                            <li>driverId (reference to Driver)</li>
                            <li>rentalId (reference to RentalRequest)</li>
                        </ul>
                    </li>
                    <li>Fields: place, pickupDate, dropoffDate, totalAmount, paymentStatus, vehicleStatus, createdAt</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Transaction Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: Transactions</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Foreign Keys:
                        <ul style="padding-left: 20px; margin: 5px 0;">
                            <li>userId (reference to User)</li>
                            <li>vehicleId (reference to VehicleRequest)</li>
                        </ul>
                    </li>
                    <li>Fields: amount, type, createdAt</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Cancellation Charges Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: CancellationCharges</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Fields: percentage, appliedDate</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>User Charges History Store</h4>
                <ul>
                    <li>Database: MongoDB</li>
                    <li>Collection: UserChargesHistory and UserRentalChargesHistory</li>
                    <li>Primary Key: _id (ObjectId)</li>
                    <li>Foreign Keys: userId, bookingId, vehicleId/rentalId</li>
                    <li>Fields: amount, type, status, timestamp</li>
                </ul>
            </div>
            
            <div class="data-store">
                <h4>Session Store</h4>
                <ul>
                    <li>Database: MongoDB (via connect-mongo)</li>
                    <li>Collection: sessions</li>
                    <li>Fields: session data, expiry</li>
                </ul>
            </div>
        </div>
        
        <footer>
            <p>QuickExplore - Physical Data Flow Diagrams</p>
        </footer>
    </div>

    <script>
        // JavaScript for collapsible sections
        document.addEventListener('DOMContentLoaded', function() {
            var coll = document.getElementsByClassName("collapsible");
            for (var i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } 
                });
            }
            
            // Open the first section by default
            if(coll.length > 0) {
                coll[0].click();
            }
        });
    </script>
</body>
</html> 